---
title: "Power Correction Equations"
author: "Glenn Sanders"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Power Correction Equations}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Power conversion

An example set of data is from the [Nebraska Tractor Test No 520](http://digitalcommons.unl.edu/cgi/viewcontent.cgi?article=2054&context=tractormuseumlit).

The maximum Belt Power was 48.38 Hp at an air temperature of 65 Deg F and a Barometric Pressure of 28.868 inHg.

Similarly a maximum drawbar power of 42.90 Hp was recorded at a temperature of 76 deg F and a Barometric Pressure of 28.690 inHg.

At the conclusion of the test a corrected Belt and Drawbar power of 50.38 and 45.43 Hp is provided.


```{r message=FALSE, warning=FALSE}
library(units)
library(tidyverse)
library(pwrcorr)

test <- tribble(
  ~type, ~test_hp, ~temp, ~press,
  "belt",set_units(48.38,hp),set_units(65, degF),set_units(28.868, inHg),
  "drawbar",set_units(42.9,hp),set_units(76, degF),set_units(28.690, inHg)
)
test

```

The following formula replicates these adjustments,

```{r}
test %>% 
  mutate(corr_factor = j607(temp,press)) %>% 
  mutate(std_hp=test_hp * corr_factor)
```



